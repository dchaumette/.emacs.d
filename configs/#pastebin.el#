(defun sprunge ()
  "Posts the current buffer to Sprunge, and shows the resulting URL in a new buffer"
  (interactive)
  (if (buffer-file-name) (save-buffer) (write-file "C:/temp/sprunge-post"))
  (delete-other-windows)
  (let ((sprunge-buffer (get-buffer-create "*sprunge*"))
        (sprunge-window (split-window-vertically (- (window-height) 5)))
        (filename (replace-regexp-in-string "/" "\\" buffer-file-name t t))
        )
    (select-window sprunge-window)
    (set-window-buffer sprunge-window sprunge-buffer)
    (erase-buffer)
    (insert (shell-command-to-string (concat "type " filename " | curl -s -F \"sprunge=<-\" http://sprunge.us")))    
    (delete-char -1)))

(defun rtclip ()
  "Posts the current buffer to RTclip, and shows the resulting URL in a new buffer"
  (interactive)
  (if (buffer-file-name) (save-buffer) (write-file "C:/temp/rtclip-post"))
  (delete-other-windows)
  (let ((rtclip-buffer (get-buffer-create "*rtclip*"))
        (rtclip-window (split-window-vertically (- (window-height) 5)))
        (filename (replace-regexp-in-string "/" "\\" buffer-file-name t t))
        )
    (select-window rtclip-window)
    (set-window-buffer rtclip-window rtclip-buffer)
    (erase-buffer)    
    (insert (shell-command-to-string (concat "sprunge.plx -f " filename)))
))

(defun gist ()
  "Posts the current buffer to Gist, and shows the resulting URL in a new buffer"
  (interactive)
  (if (buffer-file-name) (save-buffer) (write-file "C:/temp/gist-post"))
  (delete-other-windows)
  (let ((gist-buffer (get-buffer-create "*gist*"))
        (gist-window (split-window-vertically (- (window-height) 5)))
        (filename (replace-regexp-in-string "/" "\\" buffer-file-name t t))
        )
    (select-window gist-window)
    (set-window-buffer gist-window gist-buffer)
    (erase-buffer)    
    (insert (shell-command-to-string (concat "gist.plx -f " filename)))
))

(defun gist-region()
  "Posts the current region to Gist, and shows the resulting URL in a new buffer"
  (interactive)
  (print (buffer-substring-no-properties (region-beginning) (region-end)))

